# VIM 常用命令

[TOC]

### Vim/Vi 简介

- Vim/Vi是一个功能强大的全屏幕文本编辑器
- 是Linux/UNIX上最常用的文本编辑器
- 它的作用是建立、编辑、显示文本文件
- Vim/Vi 没有菜单，只有命令

### Vim/Vi 工作模式

![image-20200428112248220](https://gitee.com/szimo/picture_repository/raw/master/images/20200828174155.png)

### 插入命令

| 命令           | 作用                     |
| -------------- | ------------------------ |
| a              | 在光标后附加文本         |
| A（shift + a） | 在本行行末附加文本  行尾 |
| i              | 在光标前插入文本         |
| I(shift+i)     | 在本行开始插入文本 行首  |
| o              | 在光标下插入新行         |
| O(shift+o)     | 在光标上插入新行         |

### 定位命令

| 命令     | 作用                           |
| -------- | ------------------------------ |
| :set nu  | 设置行号【编辑模式】           |
| :setnonu | 取消行号【编辑模式】           |
| gg       | 到第一行【命令模式】           |
| G        | 到最后一行【命令模式】         |
| nG       | 到第n行【命令模式】【从0开始】 |
| :n       | 到第n行【编辑模式】            |

| $              | 移至行尾                   |
| -------------- | -------------------------- |
| 0              | 移至本行的行首【命令模式】 |
| h 或者方向左键 | 左移一个字符【命令模式】   |
| j 或者方向下键 | 下移一行【命令模式】       |
| k 或者方向上键 | 上移一行【命令模式】       |
| l 或者方向右键 | 右移一个字符【命令模式】   |
| H              | 移至屏幕上端【命令模式】   |
| M              | 移至屏幕中央【命令模式】   |
| L              | 移至屏幕下端【命令模式】   |

### 删除命令

| 命令    | 作用                                                      |
| ------- | --------------------------------------------------------- |
| x       | 删除光标所在处字符nx 删除光标所在处后n个字符【命令模式】  |
| dd      | 删除光标所在行，ndd删除n行【命令模式】                    |
| :n1,n2d | 删除指定范围的行（eg :1,3d  删除了123这三行）【编辑模式】 |
| dG      | 删除光标所在行到末尾的内容【命令模式】                    |
| D       | 删除从光标所在处到行尾【命令模式】                        |

### 复制和剪切命令

| 命令    | 作用                                      |
| ------- | ----------------------------------------- |
| yy、Y   | 复制当前行【命令模式】                    |
| nyy、nY | 复制当前行以下n行【命令模式】             |
| dd      | 剪切当前行【命令模式】                    |
| ndd     | 剪切当前行以下n行【命令模式】             |
| p、P    | 粘贴在当前光标所在行下 或行上【命令模式】 |

### 替换和取消命令

| 命令         | 作用                                                       |
| ------------ | ---------------------------------------------------------- |
| r            | 取代光标所在处字符【命令模式】 输入r后输入要替换的字符即可 |
| R(shift + r) | 从光标所在处开始替换字符，按Esc结束                        |
| u            | undo,取消上一步操作                                        |

### 搜索和替换命令

| 命令              | 作用                                         |
| ----------------- | -------------------------------------------- |
| /string           | 向后搜索指定字符串  搜索时忽略大小写 :set ic |
| ?string           | 向前搜索指定字符串                           |
| :%s/old/new/g     | 全文替换指定字符串 【编辑模式】              |
| :n1,n2s/old/new/g | 在一定范围内替换指定字符串 【编辑模式】      |

% 指全文，s 指开始，g 指全局替换

  起始行，终止行s/要替换的字符串/替换的新的字符串/g    c 询问确认

### 保存和退出命令

| 命令               | 作用                                             |
| ------------------ | ------------------------------------------------ |
| :w                 | 保存修改                                         |
| :w new_filename    | 另存为指定文件                                   |
| :w >> a.txt        | 内容追加到a.txt文件中 文件需存在                 |
| :wq                | 保存修改并退出                                   |
| **shift+zz（ZZ）** | **快捷键，保存修改并退出**                       |
| :q!                | 不保存修改退出                                   |
| :wq!               | 保存修改并退出（文件所有者可忽略文件的只读属性） |

